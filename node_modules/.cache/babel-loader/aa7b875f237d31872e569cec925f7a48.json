{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Developer/NigerDeltaUnityApp_Admin/src/presentation/screens/dashboard/tabs/manage_app/newsfeeds.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nimport { makeStyles, useTheme } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport { Divider, Typography } from \"@mui/material\";\nimport { Add } from \"@mui/icons-material\";\nimport CustomDialog from \"../../../../components/dashboard/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../components/dashboard/dialogs/custom-dialog\";\nimport CategoryForm from \"../../../../forms/category/new_category_form\";\nimport EditNewsForm from \"../../../../forms/news/update_news_form\";\nimport Card from \"@mui/material/Card\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport CardContent from \"@mui/material/CardContent\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { Edit } from \"@mui/icons-material\";\nimport { Delete } from \"@mui/icons-material\";\nimport { display } from \"@mui/system\";\nimport { Grid } from \"@mui/material\";\nimport { onSnapshot, query, collection, db, doc, ref, deleteObject, storage, deleteDoc } from \"../../../../../data/firebase/\";\nimport { useSnackbar } from \"notistack\";\nimport AddNewsForm from \"../../../../forms/news/add_news_form\";\nimport Avatar from \"@mui/material/Avatar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  rowHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 10\n  },\n  main: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    margin: \"auto\",\n    minHeight: 256,\n    minWidth: 320,\n    alignItems: \"center\"\n  },\n  cardMedia: {\n    height: 156,\n    width: \"100%\"\n  },\n  subRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"end\",\n    alignItems: \"center\"\n  },\n  lhsRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"start\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    height: 48,\n    width: 48\n  },\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"start\",\n    alignItems: \"center\"\n  }\n}));\n\nconst NewsItem = props => {\n  _s();\n\n  const {\n    image,\n    name,\n    id,\n    authorName,\n    authorPhoto,\n    body,\n    date\n  } = props;\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n\n  const deleteNews = () => {\n    const fileRef = ref(storage, \"news/img_\" + id);\n    deleteObject(fileRef).then(async () => {\n      // File deleted now delete from firestore,\n      try {\n        await deleteDoc(doc(db, \"news\", \"img_\" + id));\n        setOpenDelete(false);\n        enqueueSnackbar(`Item deleted successfully`, {\n          variant: \"success\"\n        });\n      } catch (error) {\n        setOpenDelete(false);\n        enqueueSnackbar(`Item not deleted. Try again`, {\n          variant: \"error\"\n        });\n      }\n    }).catch(error => {\n      console.log(\"ErR: \", error);\n    });\n  };\n\n  const deleteBody = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      gutterBottom: true,\n      children: `Are you sure you want to delete ${name} ?`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.subRow,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        variant: \"contained\",\n        style: {\n          marginRight: 4\n        },\n        onClick: () => setOpenDelete(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        variant: \"contained\",\n        color: \"error\",\n        onClick: deleteNews,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CustomDialog, {\n      open: open,\n      title: \"Update News\",\n      handleClose: () => setOpen(false),\n      bodyComponent: /*#__PURE__*/_jsxDEV(EditNewsForm, {\n        setOpen: setOpen,\n        img: image,\n        name: name,\n        id: id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteDialog, {\n      open: openDelete,\n      title: \"Delete News\",\n      handleClose: () => setOpenDelete(false),\n      bodyComponent: deleteBody\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      elevation: 3,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.rowHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.lhsRow,\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            alt: \"Passport\",\n            src: authorPhoto,\n            className: classes.avatar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.subRow,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"delete\",\n            color: \"primary\",\n            onClick: () => setOpen(true),\n            children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"delete\",\n            color: \"error\",\n            onClick: () => setOpenDelete(true),\n            children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n        image: image,\n        className: classes.cardMedia\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.row,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          fontSize: 14,\n          color: \"black\",\n          padding: 1,\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(NewsItem, \"DA03wu9yUQo2m9mgb6KE8Je23Js=\", false, function () {\n  return [useStyles, useSnackbar];\n});\n\n_c = NewsItem;\n\nconst NewsFeeds = () => {\n  _s2();\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [newsList, setNewsList] = React.useState(null);\n  React.useEffect(() => {\n    const q = query(collection(db, \"news\"));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      const news = [];\n      querySnapshot.forEach(doc => {\n        news.push(doc.data());\n      });\n      setNewsList(news);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CustomDialog, {\n      open: open,\n      title: \"Create NewsFeed\",\n      handleClose: () => setOpen(false),\n      bodyComponent: /*#__PURE__*/_jsxDEV(AddNewsForm, {\n        setOpen: setOpen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 24\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.row,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        color: \"blue\",\n        fontSize: 21,\n        children: \"News Feeds\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 22\n        }, this),\n        color: \"primary\",\n        variant: \"contained\",\n        onClick: () => setOpen(true),\n        children: \"Add News\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.main,\n      children: [newsList && /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: {\n          xs: 2,\n          md: 2\n        },\n        columns: {\n          xs: 4,\n          sm: 8,\n          md: 12\n        },\n        children: newsList === null || newsList === void 0 ? void 0 : newsList.map((_, index) => {\n          var _newsList$index, _newsList$index2;\n\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            sm: 4,\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(NewsItem, {\n              id: (_newsList$index = newsList[index]) === null || _newsList$index === void 0 ? void 0 : _newsList$index.id,\n              image: (_newsList$index2 = newsList[index]) === null || _newsList$index2 === void 0 ? void 0 : _newsList$index2.image,\n              name: newsList[index].title,\n              authorName: newsList[index].authorName,\n              authorPhoto: newsList[index].authorPhoto,\n              body: newsList[index].body\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), !newsList && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"No records found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(NewsFeeds, \"jgLgN6JClNjkL9cbOwdeKHF5bgg=\", false, function () {\n  return [useStyles];\n});\n\n_c2 = NewsFeeds;\nexport default NewsFeeds;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NewsItem\");\n$RefreshReg$(_c2, \"NewsFeeds\");","map":{"version":3,"sources":["/Users/apple/Developer/NigerDeltaUnityApp_Admin/src/presentation/screens/dashboard/tabs/manage_app/newsfeeds.js"],"names":["React","makeStyles","useTheme","Button","Divider","Typography","Add","CustomDialog","DeleteDialog","CategoryForm","EditNewsForm","Card","CardMedia","CardContent","IconButton","Edit","Delete","display","Grid","onSnapshot","query","collection","db","doc","ref","deleteObject","storage","deleteDoc","useSnackbar","AddNewsForm","Avatar","useStyles","theme","row","flexDirection","justifyContent","alignItems","rowHeader","padding","main","flex","margin","minHeight","minWidth","cardMedia","height","width","subRow","lhsRow","avatar","column","NewsItem","props","image","name","id","authorName","authorPhoto","body","date","classes","open","setOpen","useState","openDelete","setOpenDelete","enqueueSnackbar","deleteNews","fileRef","then","variant","error","catch","console","log","deleteBody","marginRight","NewsFeeds","newsList","setNewsList","useEffect","q","unsubscribe","querySnapshot","news","forEach","push","data","xs","md","sm","map","_","index","title"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles, useTheme } from \"@mui/styles\";\nimport Button from \"@mui/material/Button\";\nimport { Divider, Typography } from \"@mui/material\";\nimport { Add } from \"@mui/icons-material\";\nimport CustomDialog from \"../../../../components/dashboard/dialogs/custom-dialog\";\nimport DeleteDialog from \"../../../../components/dashboard/dialogs/custom-dialog\";\nimport CategoryForm from \"../../../../forms/category/new_category_form\";\nimport EditNewsForm from \"../../../../forms/news/update_news_form\";\nimport Card from \"@mui/material/Card\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport CardContent from \"@mui/material/CardContent\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { Edit } from \"@mui/icons-material\";\nimport { Delete } from \"@mui/icons-material\";\nimport { display } from \"@mui/system\";\nimport { Grid } from \"@mui/material\";\nimport {\n  onSnapshot,\n  query,\n  collection,\n  db,\n  doc,\n  ref,\n  deleteObject,\n  storage,\n  deleteDoc,\n} from \"../../../../../data/firebase/\";\nimport { useSnackbar } from \"notistack\";\nimport AddNewsForm from \"../../../../forms/news/add_news_form\";\nimport Avatar from \"@mui/material/Avatar\";\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  rowHeader: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: 10,\n  },\n  main: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    margin: \"auto\",\n    minHeight: 256,\n    minWidth: 320,\n    alignItems: \"center\",\n  },\n  cardMedia: {\n    height: 156,\n    width: \"100%\",\n  },\n  subRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"end\",\n    alignItems: \"center\",\n  },\n  lhsRow: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"start\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    height: 48,\n    width: 48,\n  },\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"start\",\n    alignItems: \"center\",\n  },\n}));\n\nconst NewsItem = (props) => {\n  const { image, name, id, authorName, authorPhoto, body, date } = props;\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [openDelete, setOpenDelete] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const deleteNews = () => {\n    const fileRef = ref(storage, \"news/img_\" + id);\n\n    deleteObject(fileRef)\n      .then(async () => {\n        // File deleted now delete from firestore,\n        try {\n          await deleteDoc(doc(db, \"news\", \"img_\" + id));\n          setOpenDelete(false);\n          enqueueSnackbar(`Item deleted successfully`, { variant: \"success\" });\n        } catch (error) {\n          setOpenDelete(false);\n          enqueueSnackbar(`Item not deleted. Try again`, { variant: \"error\" });\n        }\n      })\n      .catch((error) => {\n        console.log(\"ErR: \", error);\n      });\n  };\n\n  const deleteBody = (\n    <div>\n      <Typography variant=\"body2\" gutterBottom>\n        {`Are you sure you want to delete ${name} ?`}\n      </Typography>\n      <br />\n      <div className={classes.subRow}>\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          style={{ marginRight: 4 }}\n          onClick={() => setOpenDelete(false)}\n        >\n          Cancel\n        </Button>\n\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          color=\"error\"\n          onClick={deleteNews}\n        >\n          Delete\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      <CustomDialog\n        open={open}\n        title=\"Update News\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={\n          <EditNewsForm setOpen={setOpen} img={image} name={name} id={id} />\n        }\n      />\n      <DeleteDialog\n        open={openDelete}\n        title=\"Delete News\"\n        handleClose={() => setOpenDelete(false)}\n        bodyComponent={deleteBody}\n      />\n      <Card elevation={3}>\n        <div className={classes.rowHeader}>\n          <div className={classes.lhsRow}>\n            <Avatar\n              alt=\"Passport\"\n              src={authorPhoto}\n              className={classes.avatar}\n            />\n            <div></div>\n          </div>\n          <div className={classes.subRow}>\n            <IconButton\n              aria-label=\"delete\"\n              color=\"primary\"\n              onClick={() => setOpen(true)}\n            >\n              <Edit />\n            </IconButton>\n            <IconButton\n              aria-label=\"delete\"\n              color=\"error\"\n              onClick={() => setOpenDelete(true)}\n            >\n              <Delete />\n            </IconButton>\n          </div>\n        </div>\n        <CardMedia image={image} className={classes.cardMedia} />\n        <Divider />\n        <div className={classes.row}>\n          <Typography fontSize={14} color=\"black\" padding={1}>\n            {name}\n          </Typography>\n        </div>\n      </Card>\n    </>\n  );\n};\n\nconst NewsFeeds = () => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [newsList, setNewsList] = React.useState(null);\n\n  React.useEffect(() => {\n    const q = query(collection(db, \"news\"));\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const news = [];\n      querySnapshot.forEach((doc) => {\n        news.push(doc.data());\n      });\n      setNewsList(news);\n    });\n  }, []);\n\n  return (\n    <div>\n      <CustomDialog\n        open={open}\n        title=\"Create NewsFeed\"\n        handleClose={() => setOpen(false)}\n        bodyComponent={<AddNewsForm setOpen={setOpen} />}\n      />\n      <div className={classes.row}>\n        <Typography variant=\"h6\" color=\"blue\" fontSize={21}>\n          News Feeds\n        </Typography>\n        <Button\n          startIcon={<Add />}\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => setOpen(true)}\n        >\n          Add News\n        </Button>\n      </div>\n      <br />\n      <div className={classes.main}>\n        {newsList && (\n          <Grid\n            container\n            spacing={{ xs: 2, md: 2 }}\n            columns={{ xs: 4, sm: 8, md: 12 }}\n          >\n            {newsList?.map((_, index) => (\n              <Grid item xs={2} sm={4} md={4} key={index}>\n                <NewsItem\n                  id={newsList[index]?.id}\n                  image={newsList[index]?.image}\n                  name={newsList[index].title}\n                  authorName={newsList[index].authorName}\n                  authorPhoto={newsList[index].authorPhoto}\n                  body={newsList[index].body}\n                />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n        {!newsList && (\n          <div>\n            <Typography>No records found</Typography>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NewsFeeds;\n"]},"metadata":{},"sourceType":"module"}